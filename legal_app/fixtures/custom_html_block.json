[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"root-element\">\r\n  <h4>Case Details</h4>\r\n<div id=\"table-content\">\r\n  <table class=\"table table-bordered\">\r\n    <thead>\r\n      <tr>\r\n        <th>Case Number</th>\r\n        <th>Case Type</th>\r\n        <th>Opposite Party</th>\r\n        <th>Meril Company</th>\r\n        <th>Meril Role</th>\r\n        <th>Filing Date</th>\r\n        <th>Amount</th>\r\n        <th class=\"status\">Case Status</th>\r\n        <th>Court City</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody id=\"data\">\r\n      <!-- Dynamic rows will be appended here -->\r\n    </tbody>\r\n  </table>\r\n </div>\r\n</div>\r\n",
  "modified": "2025-02-18 09:46:33.098317",
  "name": "Case Master Details",
  "private": 0,
  "roles": [],
  "script": "$(document).ready(function () {\r\n  console.log(\"DOM is fully loaded.\");\r\n  loadData();\r\n//   setInterval(loadData, 10000);\r\n});\r\n\r\nfunction loadData() {\r\n  frappe.call({\r\n    method: \"frappe.client.get_list\",\r\n    args: {\r\n      doctype: \"Case Master\",\r\n      fields: [\"name\", \"case_number\", \"meril_entity\", \"amount\",\"filing_date\", \"opposite_party\", \"court_city_name\", \"status\", \"case_type\", \"meril_role\"],\r\n      filters: {'legal_team': \"Legal\"}\r\n    },\r\n    callback: function (response) {\r\n      \r\n      if (response.message && response.message.length > 0) {\r\n        root_element.querySelector(\"#data\").innerHTML = '';\r\n        \r\n        response.message.forEach(function (item) {\r\n          frappe.call({\r\n            method: \"frappe.client.get\",\r\n            args: { doctype: \"Case Master\", name: item.name },\r\n            \r\n            callback: function (masterResponse) {\r\n              if (masterResponse.message) {\r\n                const data = masterResponse.message;\r\n\r\n                const latestDate = data.filing_date;\r\n                const dateOfFilingHTML = latestDate ? `<span>${formatDate(latestDate)}</span>` : \"No hearing date\";\r\n\r\n                const row = `\r\n                  <tr>\r\n                    <td><a href=\"/app/case-master/${item.name}\" target=\"_blank\">${item.case_number}</a></td>\r\n                    <td>${item.case_type}</td>\r\n                    <td>${item.opposite_party}</td>\r\n                    <td>${item.meril_entity}</td>\r\n                    <td>${item.meril_role}</td>\r\n                    <td>${dateOfFilingHTML}</td>\r\n                    <td>${formatAmount(item.amount)}</td>\r\n                    <td class=\"status\"><span class=\"${getStatusClass(item.status)}\">${item.status}</span></td>\r\n                    <td>${item.court_city_name}</td>\r\n                  </tr>\r\n                `;\r\n\r\n                console.log(\"Row to be added to the table:\", row);\r\n                root_element.querySelector(\"#data\").innerHTML += row;\r\n                // $(\"#data\").append(row);\r\n              }\r\n            },\r\n            error: function (err) {\r\n              console.error(\"Error fetching detailed data:\", err);\r\n            },\r\n          });\r\n        });\r\n      } else {\r\n        console.warn(\"No data found for the specified filters.\");\r\n      }\r\n    },\r\n    error: function (err) {\r\n      console.error(\"Error fetching list data:\", err);\r\n    },\r\n  });\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  const date = new Date(dateString);\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const year = date.getFullYear();\r\n  return `${day}-${month}-${year}`;\r\n}\r\n\r\nfunction formatAmount(amount) {\r\n  if (!amount) return \"₹0.00\";\r\n  return \"₹\" + Number(amount).toLocaleString(\"en-IN\", { minimumFractionDigits: 2, maximumFractionDigits: 2 });\r\n}\r\n\r\n\r\nfunction getStatusClass(status) {\r\n  switch (status) {\r\n    case \"Open\":\r\n      return \"Open\";\r\n    case \"Closed\":\r\n      return \"Closed\";\r\n    case \"Re-Open\":\r\n      return \"Re-Open\";\r\n    default:\r\n      return \"\";\r\n  }\r\n}\r\n",
  "style": "#root-element {\r\n  font-family: 'Arial', sans-serif;\r\n  background-color: #f4f6f9;\r\n  padding-top: 20px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  padding-bottom: 5px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n#table-content {\r\n    overflow-x: scroll;\r\n}\r\n\r\n.table td a {\r\n  color: #2568EF;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n  padding: 2px 5px;\r\n  border-radius: 3px;\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n\r\n.table td a:hover {\r\n  background-color: #DDE8FE;\r\n  color: #0056b3;\r\n}\r\n\r\n.table td a:focus {\r\n  outline: 2px solid #4caf50;\r\n}\r\n\r\nh4 {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n}\r\n\r\n.table th, .table td {\r\n  padding: 12px 15px;\r\n  text-align: left;\r\n  font-size: 14px;\r\n}\r\n\r\n.table th {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n}\r\n\r\n.table th.status {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n  width:90px;\r\n}\r\n\r\n.table th.hearing {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n  width:115px;\r\n}\r\n\r\n.table td {\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.table tbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n/*.table .status {*/\r\n/*  font-weight: bold;*/\r\n/*  text-align: center;*/\r\n/*  display: inline-block;*/\r\n/*  background-color: white;*/\r\n/*  width: 100%;*/\r\n/*}*/\r\n\r\n.table .status .Open {\r\n  background-color: #4caf50;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Closed {\r\n  background-color: #f44336;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Re-Open {\r\n  background-color: #ffeb3b;\r\n  color: black;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n\r\n.table .status .Open:hover,\r\n.table .status .Closed:hover,\r\n.table .status .Re-Open:hover {\r\n  opacity: 0.8;\r\n}\r\n\r\n.table .remarks {\r\n  color: #6c757d;\r\n}\r\n\r\n.table th, .table td {\r\n  white-space: nowrap;\r\n}\r\n\r\n\r\n@media (max-width: 768px) {\r\n  .table th, .table td {\r\n    font-size: 12px;\r\n    padding: 8px 10px;\r\n  }\r\n\r\n  .table {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  h4 {\r\n    font-size: 20px;\r\n  }\r\n  .table th, .table td {\r\n    padding: 8px 6px;\r\n  }\r\n}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"root-element\">\r\n  <h4>EPO Opposition Case Details</h4>\r\n <div id=\"table-content\">\r\n  <table class=\"table table-bordered\">\r\n    <thead>\r\n      <tr>\r\n        <th>Case Name</th>\r\n        <th>Patent Number</th>\r\n        <th>Court</th>\r\n        <th>Plaintiff</th>\r\n        <th>Defendant</th>\r\n        <th>Status</th>\r\n        <th>Remarks</th>\r\n        <th>Hearing Date</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody id=\"data\">\r\n      <!-- Dynamic rows will be appended here -->\r\n    </tbody>\r\n  </table>\r\n  </div>\r\n</div>\r\n",
  "modified": "2025-02-05 17:31:43.740075",
  "name": "EPO Opposition Table review",
  "private": 0,
  "roles": [],
  "script": "$(document).ready(function () {\r\n    console.log(\"DOM is fully loaded.\");\r\n    loadData();\r\n    // setInterval(loadData, 10000);\r\n});\r\n\r\nfunction loadData() {\r\n  frappe.call({\r\n    method: \"frappe.client.get_list\",\r\n    args: {\r\n      doctype: \"EPO Opposition Master\",\r\n      fields: [\"name\", \"case_name\", \"patent_no\", \"court\", \"status\", \"remarks\"]\r\n    },\r\n    callback: function (response) {\r\n      if (response.message && response.message.length > 0) {\r\n          root_element.querySelector(\"#data\").innerHTML = '';\r\n          \r\n        response.message.forEach(function (item) {\r\n          frappe.call({\r\n            method: \"frappe.client.get\",\r\n            args: { doctype: \"EPO Opposition Master\", name: item.name },\r\n            callback: function (masterResponse) {\r\n              if (masterResponse.message) {\r\n                const data = masterResponse.message;\r\n\r\n                const applicantHTML = (data.applicant || [])\r\n                  .map((a) => `<span>${a.defendantapplicant}</span>`)\r\n                  .join(\",<br>\");\r\n                  \r\n                const defendantHTML = (data.defendant || [])\r\n                  .map((d) => `<span>${d.defendantapplicant}</span>`)\r\n                  .join(\",<br> \");\r\n                  \r\n                // const dateOfHearingHTML = (data.patent_hearing_details || [])\r\n                //   .map((d) => {\r\n                //     const formattedDate = formatDate(d.date_of_hearing);\r\n                //     return `<span>${formattedDate}</span>`;\r\n                //   })\r\n                //   .join(\",<br>\");\r\n                const latestDate = getLatestHearingDate(data.opposition_hearing);\r\n                const dateOfHearingHTML = latestDate ? `<span>${formatDate(latestDate)}</span>` : \"No hearing date\";\r\n\r\n                const row = `\r\n                  <tr>\r\n                    <td><a href=\"/app/epo-opposition-master/${item.name}\" target=\"_blank\">${item.case_name}</a></td>\r\n                    <td>${item.patent_no}</td>\r\n                    <td>${item.court}</td>\r\n                    <td>${applicantHTML}</td>\r\n                    <td>${defendantHTML}</td>\r\n                    <td class=\"status\"><span class=\"${getStatusClass(item.status)}\">${item.status}</span></td>\r\n                    <td>${item.remarks}</td>\r\n                    <td>${dateOfHearingHTML}</td>\r\n                  </tr>\r\n                `;\r\n\r\n                console.log(\"Row to be added to the table:\", row);\r\n                root_element.querySelector(\"#data\").innerHTML += row;\r\n              }\r\n            },\r\n            error: function (err) {\r\n              console.error(\"Error fetching detailed data:\", err);\r\n            },\r\n          });\r\n        });\r\n      } else {\r\n        console.warn(\"No data found for the specified filters.\");\r\n      }\r\n    },\r\n    error: function (err) {\r\n      console.error(\"Error fetching list data:\", err);\r\n    },\r\n  });\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  const date = new Date(dateString);\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const year = date.getFullYear();\r\n  \r\n  return `${day}-${month}-${year}`;\r\n}\r\n\r\nfunction getLatestHearingDate(hearingDetails) {\r\n  if (!hearingDetails || hearingDetails.length === 0) return null;\r\n\r\n  // Sort by date_of_hearing (descending order)\r\n  hearingDetails.sort((a, b) => new Date(b.date_of_hearing) - new Date(a.date_of_hearing));\r\n\r\n  // Return the latest date\r\n  return hearingDetails[0]?.date_of_hearing || null;\r\n}\r\n\r\nfunction getStatusClass(status) {\r\n  switch (status) {\r\n    case \"Win\":\r\n      return \"Win\";\r\n    case \"Lose\":\r\n      return \"Lose\";\r\n    case \"Ongoing\":\r\n      return \"Ongoing\";\r\n    case \"Settled\":\r\n      return \"Settled\";\r\n    case \"Closed\":\r\n      return \"Closed\";\r\n    default:\r\n      return \"\";\r\n  }\r\n}\r\n",
  "style": "#root-element {\r\n  font-family: 'Arial', sans-serif;\r\n  background-color: #f4f6f9;\r\n  padding-top: 20px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  padding-bottom: 5px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n#table-content {\r\n    overflow-x: scroll;    \r\n}\r\n\r\n.table td a {\r\n  color: #2568EF;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n  padding: 2px 5px;\r\n  border-radius: 3px;\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n\r\n.table td a:hover {\r\n  background-color: #DDE8FE;\r\n  color: #0056b3;\r\n}\r\n\r\n.table td a:focus {\r\n  outline: 2px solid #4caf50;\r\n}\r\n\r\n\r\nh4 {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n}\r\n\r\n.table th, .table td {\r\n  padding: 12px 15px;\r\n  text-align: left;\r\n  font-size: 14px;\r\n}\r\n\r\n.table th {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n}\r\n\r\n.table td {\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.table tbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n/*.table .status {*/\r\n/*  font-weight: bold;*/\r\n/*  text-align: center;*/\r\n/*  display: inline-block;*/\r\n/*  background-color: white;*/\r\n/*  width: 100%;*/\r\n/*}*/\r\n\r\n.table .status .Win {\r\n  background-color: #4caf50;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Lose {\r\n  background-color: #f44336;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Ongoing {\r\n  background-color: #ffeb3b;\r\n  color: black;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Settled {\r\n  background-color: #00bcd4;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Closed {\r\n  background-color: #ff9800;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Win:hover,\r\n.table .status .Lose:hover,\r\n.table .status .Ongoing:hover,\r\n.table .status .Settled:hover,\r\n.table .status .Closed:hover {\r\n  opacity: 0.8;\r\n}\r\n\r\n\r\n.table .remarks {\r\n  color: #6c757d;\r\n}\r\n\r\n.table th:nth-child(2),\r\n.table th:nth-child(7), .table td:nth-child(7),\r\n.table th:nth-child(8), .table td:nth-child(8),\r\n.table th:nth-child(1), .table td:nth-child(1),\r\n.table th:nth-child(4), .table td:nth-child(4),\r\n.table th:nth-child(5), .table td:nth-child(5) {\r\n  white-space: nowrap;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .table th, .table td {\r\n    font-size: 12px;\r\n    padding: 8px 10px;\r\n  }\r\n\r\n  .table {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  h4 {\r\n    font-size: 20px;\r\n  }\r\n  .table th, .table td {\r\n    padding: 8px 6px;\r\n  }\r\n}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"root-element\">\r\n  <h4>National Court Case Details</h4>\r\n<div id=\"table-content\">\r\n  <table class=\"table table-bordered\">\r\n    <thead>\r\n      <tr>\r\n        <th>Case Name</th>\r\n        <th>Patent Number</th>\r\n        <th>Court</th>\r\n        <th>Plaintiff</th>\r\n        <th>Defendant</th>\r\n        <th class=\"status\">Status</th>\r\n        <th>Remarks</th>\r\n        <th class=\"hearing\">Hearing Date</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody id=\"data\">\r\n      <!-- Dynamic rows will be appended here -->\r\n    </tbody>\r\n  </table>\r\n </div>\r\n</div>\r\n",
  "modified": "2025-02-17 14:17:04.648638",
  "name": "National Court Table Preview",
  "private": 0,
  "roles": [],
  "script": "$(document).ready(function () {\r\n  console.log(\"DOM is fully loaded.\");\r\n  loadData();\r\n//   setInterval(loadData, 10000);\r\n});\r\n\r\nfunction loadData() {\r\n  frappe.call({\r\n    method: \"frappe.client.get_list\",\r\n    args: {\r\n      doctype: \"Patent Master\",\r\n      fields: [\"name\", \"case_name\", \"patent_number\", \"court\", \"status\", \"remarks\"],\r\n      filters: { 'case_type': \"National Court\" },\r\n    },\r\n    callback: function (response) {\r\n      \r\n      if (response.message && response.message.length > 0) {\r\n        root_element.querySelector(\"#data\").innerHTML = '';\r\n        \r\n        response.message.forEach(function (item) {\r\n          frappe.call({\r\n            method: \"frappe.client.get\",\r\n            args: { doctype: \"Patent Master\", name: item.name },\r\n            \r\n            callback: function (masterResponse) {\r\n              if (masterResponse.message) {\r\n                const data = masterResponse.message;\r\n\r\n                const applicantHTML = (data.applicant || [])\r\n                  .map((a) => `<span>${a.defendantapplicant}</span>`)\r\n                  .join(\",<br>\");\r\n                  \r\n                const defendantHTML = (data.defendant || [])\r\n                  .map((d) => `<span>${d.defendantapplicant}</span>`)\r\n                  .join(\",<br> \");\r\n                  \r\n                // const dateOfHearingHTML = (data.patent_hearing_details || [])\r\n                //   .map((d) => {\r\n                //     const formattedDate = formatDate(d.date_of_hearing);\r\n                //     return `<span>${formattedDate}</span>`;\r\n                //   })\r\n                //   .join(\",<br>\");\r\n                const latestDate = getLatestHearingDate(data.patent_hearing_details);\r\n                const dateOfHearingHTML = latestDate ? `<span>${formatDate(latestDate)}</span>` : \"No hearing date\";\r\n\r\n                const row = `\r\n                  <tr>\r\n                    <td><a href=\"/app/patent-master/${item.name}\" target=\"_blank\">${item.case_name}</a></td>\r\n                    <td>${item.patent_number}</td>\r\n                    <td>${item.court}</td>\r\n                    <td>${applicantHTML}</td>\r\n                    <td>${defendantHTML}</td>\r\n                    <td class=\"status\"><span class=\"${getStatusClass(item.status)}\">${item.status}</span></td>\r\n                    <td>${item.remarks}</td>\r\n                    <td>${dateOfHearingHTML}</td>\r\n                  </tr>\r\n                `;\r\n\r\n                console.log(\"Row to be added to the table:\", row);\r\n                root_element.querySelector(\"#data\").innerHTML += row;\r\n                // $(\"#data\").append(row);\r\n              }\r\n            },\r\n            error: function (err) {\r\n              console.error(\"Error fetching detailed data:\", err);\r\n            },\r\n          });\r\n        });\r\n      } else {\r\n        console.warn(\"No data found for the specified filters.\");\r\n      }\r\n    },\r\n    error: function (err) {\r\n      console.error(\"Error fetching list data:\", err);\r\n    },\r\n  });\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  const date = new Date(dateString);\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const year = date.getFullYear();\r\n  \r\n  return `${day}-${month}-${year}`;\r\n}\r\n\r\nfunction getLatestHearingDate(hearingDetails) {\r\n  if (!hearingDetails || hearingDetails.length === 0) return null;\r\n\r\n  // Sort by date_of_hearing (descending order)\r\n  hearingDetails.sort((a, b) => new Date(b.date_of_hearing) - new Date(a.date_of_hearing));\r\n\r\n  // Return the latest date\r\n  return hearingDetails[0]?.date_of_hearing || null;\r\n}\r\n\r\nfunction getStatusClass(status) {\r\n  switch (status) {\r\n    case \"Win\":\r\n      return \"Win\";\r\n    case \"Lose\":\r\n      return \"Lose\";\r\n    case \"Ongoing\":\r\n      return \"Ongoing\";\r\n    case \"Settled\":\r\n      return \"Settled\";\r\n    case \"Closed\":\r\n      return \"Closed\";\r\n    default:\r\n      return \"\";\r\n  }\r\n}\r\n",
  "style": "#root-element {\r\n  font-family: 'Arial', sans-serif;\r\n  background-color: #f4f6f9;\r\n  padding-top: 20px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  padding-bottom: 5px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n#table-content {\r\n    overflow-x: scroll;\r\n}\r\n\r\n.table td a {\r\n  color: #2568EF;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n  padding: 2px 5px;\r\n  border-radius: 3px;\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n\r\n.table td a:hover {\r\n  background-color: #DDE8FE;\r\n  color: #0056b3;\r\n}\r\n\r\n.table td a:focus {\r\n  outline: 2px solid #4caf50;\r\n}\r\n\r\nh4 {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n}\r\n\r\n.table th, .table td {\r\n  padding: 12px 15px;\r\n  text-align: left;\r\n  font-size: 14px;\r\n}\r\n\r\n.table th {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n}\r\n\r\n.table th.status {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n  width:90px;\r\n}\r\n\r\n.table th.hearing {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n  width:115px;\r\n}\r\n\r\n.table td {\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.table tbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n/*.table .status {*/\r\n/*  font-weight: bold;*/\r\n/*  text-align: center;*/\r\n/*  display: inline-block;*/\r\n/*  background-color: white;*/\r\n/*  width: 100%;*/\r\n/*}*/\r\n\r\n.table .status .Win {\r\n  background-color: #4caf50;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Lose {\r\n  background-color: #f44336;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Ongoing {\r\n  background-color: #ffeb3b;\r\n  color: black;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Settled {\r\n  background-color: #00bcd4;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Closed {\r\n  background-color: #ff9800;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Win:hover,\r\n.table .status .Lose:hover,\r\n.table .status .Ongoing:hover,\r\n.table .status .Settled:hover,\r\n.table .status .Closed:hover {\r\n  opacity: 0.8;\r\n}\r\n\r\n.table .remarks {\r\n  color: #6c757d;\r\n}\r\n\r\n.table th:nth-child(2),\r\n.table th:nth-child(7),.table td:nth-child(7),\r\n.table th:nth-child(8),.table td:nth-child(8),\r\n.table th:nth-child(1),.table td:nth-child(1),\r\n.table th:nth-child(4), .table td:nth-child(4),\r\n.table th:nth-child(5), .table td:nth-child(5) {\r\n  white-space: nowrap;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .table th, .table td {\r\n    font-size: 12px;\r\n    padding: 8px 10px;\r\n  }\r\n\r\n  .table {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  h4 {\r\n    font-size: 20px;\r\n  }\r\n  .table th, .table td {\r\n    padding: 8px 6px;\r\n  }\r\n}\r\n"
 },
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div id=\"root-element\">\r\n  <h4>UPC Case Details</h4>\r\n <div id=\"table-content\">\r\n  <table class=\"table table-bordered\">\r\n    <thead>\r\n      <tr>\r\n        <th>Case Name</th>\r\n        <th>Patent Number</th>\r\n        <th>Court</th>\r\n        <th>Plaintiff</th>\r\n        <th>Defendant</th>\r\n        <th class=\"status\">Status</th>\r\n        <th>Remarks</th>\r\n        <th class=\"hearing\">Hearing Date</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody id=\"data\">\r\n      <!-- Dynamic rows will be appended here -->\r\n    </tbody>\r\n  </table>\r\n </div>\r\n</div>\r\n",
  "modified": "2025-02-17 14:16:32.449494",
  "name": "UPC Table Preview",
  "private": 0,
  "roles": [],
  "script": "$(document).ready(function () {\r\n  console.log(\"DOM is fully loaded.\");\r\n  loadData();\r\n//   setInterval(loadData, 10000);\r\n});\r\n\r\nfunction loadData() {\r\n  frappe.call({\r\n    method: \"frappe.client.get_list\",\r\n    args: {\r\n      doctype: \"Patent Master\",\r\n      fields: [\"name\", \"case_name\", \"patent_number\", \"court\", \"status\", \"remarks\"],\r\n      filters: { 'case_type': \"UPC\" },\r\n    },\r\n    callback: function (response) {\r\n \r\n      if (response.message && response.message.length > 0) {\r\n        root_element.querySelector(\"#data\").innerHTML = '';\r\n          \r\n        response.message.forEach(function (item) {\r\n          frappe.call({\r\n            method: \"frappe.client.get\",\r\n            args: { doctype: \"Patent Master\", name: item.name },\r\n            \r\n            callback: function (masterResponse) {\r\n              if (masterResponse.message) {\r\n                const data = masterResponse.message;\r\n\r\n                const applicantHTML = (data.applicant || [])\r\n                  .map((a) => `<span>${a.defendantapplicant}</span>`)\r\n                  .join(\",<br>\");\r\n                  \r\n                const defendantHTML = (data.defendant || [])\r\n                  .map((d) => `<span>${d.defendantapplicant}</span>`)\r\n                  .join(\",<br> \");\r\n                  \r\n                // const dateOfHearingHTML = (data.patent_hearing_details || [])\r\n                //   .map((d) => {\r\n                //     const formattedDate = formatDate(d.date_of_hearing);\r\n                //     return `<span>${formattedDate}</span>`;\r\n                //   })\r\n                //   .join(\",<br>\");\r\n                const latestDate = getLatestHearingDate(data.patent_hearing_details);\r\n                const dateOfHearingHTML = latestDate ? `<span>${formatDate(latestDate)}</span>` : \"No hearing date\";\r\n\r\n                const row = `\r\n                  <tr>\r\n                    <td><a href=\"/app/patent-master/${item.name}\" target=\"_blank\">${item.case_name}</a></td>\r\n                    <td>${item.patent_number}</td>\r\n                    <td>${item.court}</td>\r\n                    <td>${applicantHTML}</td>\r\n                    <td>${defendantHTML}</td>\r\n                    <td class=\"status\"><span class=\"${getStatusClass(item.status)}\">${item.status}</span></td>\r\n                    <td>${item.remarks}</td>\r\n                    <td>${dateOfHearingHTML}</td>\r\n                  </tr>\r\n                `;\r\n\r\n                console.log(\"Row to be added to the table:\", row);\r\n                root_element.querySelector(\"#data\").innerHTML += row;\r\n                // $(\"#data\").append(row);\r\n              }\r\n            },\r\n            error: function (err) {\r\n              console.error(\"Error fetching detailed data:\", err);\r\n            },\r\n          });\r\n        });\r\n      } else {\r\n        console.warn(\"No data found for the specified filters.\");\r\n      }\r\n    },\r\n    error: function (err) {\r\n      console.error(\"Error fetching list data:\", err);\r\n    },\r\n  });\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  const date = new Date(dateString);\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const year = date.getFullYear();\r\n  \r\n  return `${day}-${month}-${year}`;\r\n}\r\n\r\nfunction getLatestHearingDate(hearingDetails) {\r\n  if (!hearingDetails || hearingDetails.length === 0) return null;\r\n\r\n  hearingDetails.sort((a, b) => new Date(b.date_of_hearing) - new Date(a.date_of_hearing));\r\n\r\n  return hearingDetails[0]?.date_of_hearing || null;\r\n}\r\n\r\nfunction getStatusClass(status) {\r\n  switch (status) {\r\n    case \"Win\":\r\n      return \"Win\";\r\n    case \"Lose\":\r\n      return \"Lose\";\r\n    case \"Ongoing\":\r\n      return \"Ongoing\";\r\n    case \"Settled\":\r\n      return \"Settled\";\r\n    case \"Closed\":\r\n      return \"Closed\";\r\n    default:\r\n      return \"\";\r\n  }\r\n}\r\n\r\n",
  "style": "#root-element {\r\n  font-family: 'Arial', sans-serif;\r\n  background-color: #f4f6f9;\r\n  padding-top: 20px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  padding-bottom: 5px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n#table-content {\r\n    overflow-x: scroll;\r\n}\r\n\r\nh4 {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.table td a {\r\n  color: #2568EF;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n  padding: 2px 5px;\r\n  border-radius: 3px;\r\n  transition: background-color 0.3s, color 0.3s;\r\n}\r\n\r\n.table td a:hover {\r\n  background-color: #DDE8FE;\r\n  color: #0056b3;\r\n}\r\n\r\n.table td a:focus {\r\n  outline: 2px solid #4caf50;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n  overflow: x-auto;\r\n}\r\n\r\n.table th, .table td {\r\n  padding: 12px 15px;\r\n  text-align: left;\r\n  font-size: 14px;\r\n}\r\n\r\n.table th.status {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n}\r\n\r\n.table .hearing {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n}\r\n\r\n.table th {\r\n  background-color: #DDE8FE;\r\n  color: #2568EF;\r\n  font-weight: bold;\r\n}\r\n\r\n.table td {\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.table tbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n/*.table .status {*/\r\n/*  font-weight: bold;*/\r\n/*  text-align: center;*/\r\n/*  display: inline-block;*/\r\n/*  background-color: white;*/\r\n/*  width: 100%;*/\r\n/*  height: 68px;*/\r\n/*}*/\r\n\r\n.table .status .Win {\r\n  background-color: #4caf50;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Lose {\r\n  background-color: #f44336;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.table .status .Ongoing {\r\n  background-color: #ffeb3b;\r\n  color: black;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Settled {\r\n  background-color: #00bcd4;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Closed {\r\n  background-color: #ff9800;\r\n  color: white;\r\n  padding: 8px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.table .status .Win:hover,\r\n.table .status .Lose:hover,\r\n.table .status .Ongoing:hover,\r\n.table .status .Settled:hover,\r\n.table .status .Closed:hover {\r\n  opacity: 0.8;\r\n}\r\n\r\n\r\n.table .remarks {\r\n  color: #6c757d;\r\n}\r\n\r\n.table th:nth-child(2),\r\n.table th:nth-child(1),.table td:nth-child(1),\r\n.table th:nth-child(4), .table td:nth-child(4),\r\n.table th:nth-child(5), .table td:nth-child(5),\r\n.table th:nth-child(7), .table td:nth-child(7),\r\n.table th:nth-child(8), .table td:nth-child(8){\r\n  white-space: nowrap;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .table th, .table td {\r\n    font-size: 12px;\r\n    padding: 8px 10px;\r\n  }\r\n\r\n  .table {\r\n    font-size: 14px;\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  h4 {\r\n    font-size: 20px;\r\n  }\r\n  .table th, .table td {\r\n    padding: 8px 6px;\r\n  }\r\n}\r\n"
 }
]